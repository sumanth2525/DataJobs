========================================
DataJobPortal - All Commands Reference
========================================

BACKEND SERVER COMMANDS
------------------------
Start Backend Server:
  cd backend
  npm start

Check Backend Health:
  curl http://localhost:5000/api/health

Stop Backend (Windows):
  netstat -ano | findstr :5000
  taskkill /F /PID <PID_NUMBER>

Install Backend Dependencies:
  cd backend
  npm install


FRONTEND COMMANDS
-----------------
Start Frontend:
  npm start

Build for Production:
  npm run build

Install Dependencies:
  npm install


DATABASE & SUPABASE COMMANDS
-----------------------------
Test Supabase Connection:
  node scripts/test-supabase.js

Test API Endpoint:
  node scripts/test-api-jobs.js

Check Jobs Count:
  node scripts/check-jobs-count.js

View All Jobs (SQL):
  SELECT * FROM jobs ORDER BY created_at DESC;

Count Jobs (SQL):
  SELECT COUNT(*) as total_jobs FROM jobs;

View Last 24 Hours Jobs (SQL):
  SELECT * FROM jobs WHERE created_at > NOW() - INTERVAL '24 hours' ORDER BY created_at DESC;

Insert Job via SQL:
  INSERT INTO jobs (company, title, location, link) VALUES ('Test Company', 'Test Job', 'Remote', 'https://test.com');

Fix RLS Policy (SQL - Run in Supabase SQL Editor):
  DROP POLICY IF EXISTS "Authenticated users can insert jobs" ON jobs;
  CREATE POLICY "Allow job inserts for service role and authenticated users" ON jobs FOR INSERT WITH CHECK (auth.role() = 'service_role' OR auth.role() = 'authenticated');


TEST COMMANDS
-------------
Run All Tests:
  npm test

Run Specific Test File:
  npm test -- Dashboard.test.js
  npm test -- JobListings.test.js
  npm test -- Dashboard.timeFilter.test.js
  npm test -- App.jobSync.test.js

Run Tests with Coverage:
  npm test -- --coverage

Run Tests Once (No Watch):
  npm test -- --watchAll=false


API TESTING COMMANDS
--------------------
Test API Endpoint:
  node scripts/test-api-jobs.js

Test Supabase Connection:
  node scripts/test-supabase.js

Test Health Endpoint (PowerShell):
  Invoke-WebRequest -Uri "http://localhost:5000/api/health" -UseBasicParsing

Test Health Endpoint (curl):
  curl http://localhost:5000/api/health


TROUBLESHOOTING COMMANDS
-------------------------
Check Port 5000 Status (Windows):
  netstat -ano | findstr :5000

Kill Process on Port 5000:
  taskkill /F /PID <PID_NUMBER>

Check if Backend is Running (PowerShell):
  try { Invoke-WebRequest -Uri "http://localhost:5000/api/health" -UseBasicParsing -TimeoutSec 2 } catch { Write-Host "Not running" }

Hard Refresh Browser:
  Windows: Ctrl + Shift + R or Ctrl + F5
  Mac: Cmd + Shift + R


DEVELOPMENT WORKFLOW
--------------------
Terminal 1 - Backend:
  cd backend
  npm start

Terminal 2 - Frontend:
  npm start

Check Both Services:
  netstat -ano | findstr :5000
  netstat -ano | findstr :3000


DATABASE QUERIES (Supabase SQL Editor)
---------------------------------------
View All Jobs:
  SELECT * FROM jobs ORDER BY created_at DESC;

Count Jobs:
  SELECT COUNT(*) FROM jobs;

View Job Statistics:
  SELECT * FROM job_stats;

View Recent Jobs:
  SELECT * FROM recent_jobs;

Search Jobs:
  SELECT * FROM jobs WHERE title ILIKE '%Data%' OR company ILIKE '%Tech%' ORDER BY created_at DESC;

Jobs by Company:
  SELECT company, COUNT(*) as job_count FROM jobs GROUP BY company ORDER BY job_count DESC;


ENVIRONMENT VARIABLES (backend/.env)
-------------------------------------
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_SERVICE_ROLE_KEY=your_service_role_key
PORT=5000
NODE_ENV=development
OPENAI_API_KEY=your_openai_api_key_here
ADZUNA_APP_ID=your_adzuna_app_id
ADZUNA_APP_KEY=your_adzuna_app_key
ADZUNA_COUNTRY=us


CLEANUP COMMANDS
-----------------
Clear Node Modules (Backend):
  cd backend
  rm -rf node_modules
  npm install

Clear Node Modules (Frontend):
  rm -rf node_modules
  npm install

Clear Build:
  rm -rf build

Clear Test Cache:
  npm test -- --clearCache


QUICK DIAGNOSTIC
----------------
Test Everything:
  node scripts/test-supabase.js
  node scripts/test-api-jobs.js
  node scripts/check-jobs-count.js

Verify Setup:
  curl http://localhost:5000/api/health
  curl http://localhost:5000/api/jobs
  curl http://localhost:3000


EMERGENCY COMMANDS
------------------
Force Kill All Node (Windows):
  taskkill /F /IM node.exe

Clear All Caches:
  npm cache clean --force
  rm -rf build
  rm -rf node_modules
  npm install


QUICK CHECKLIST
---------------
Backend running?     curl http://localhost:5000/api/health
Frontend running?    Open http://localhost:3000
Supabase connected?  node scripts/test-supabase.js
API working?        node scripts/test-api-jobs.js
Jobs in database?   node scripts/check-jobs-count.js
