================================================================================
                    DATA JOB PORTAL - TEST CASES DOCUMENTATION
================================================================================

TEST FRAMEWORKS
================================================================================

Backend Testing:
  Framework: Jest
  HTTP Testing: Supertest
  Location: backend/__tests__/

Frontend Testing:
  Framework: Jest (via react-scripts)
  Component Testing: React Testing Library
  User Interaction: @testing-library/user-event
  Location: src/__tests__/


================================================================================
                        BACKEND TEST CASES
================================================================================

FILE: backend/__tests__/server.test.js

TEST SUITE: Server Health Check
-------------------------------------------------------------------------------
Test Case: GET /api/health should return OK status
  Description: Verify health check endpoint works
  Expected: Status 200, body contains status: "OK"
  Command: cd backend && npm test -- server.test.js -t "Health Check"


TEST SUITE: Jobs API
-------------------------------------------------------------------------------
Test Case: GET /api/jobs should return jobs list
  Description: Fetch all jobs without filters
  Expected: Status 200, array of jobs returned
  Command: cd backend && npm test -- server.test.js -t "GET /api/jobs"

Test Case: GET /api/jobs with search filter
  Description: Filter jobs by search term
  Expected: Status 200, filtered results
  Command: cd backend && npm test -- server.test.js -t "search filter"

Test Case: GET /api/jobs/:id should return single job
  Description: Fetch job by ID
  Expected: Status 200, single job object
  Command: cd backend && npm test -- server.test.js -t "GET /api/jobs/:id"

Test Case: GET /api/jobs/:id should return 404 for non-existent job
  Description: Handle missing job gracefully
  Expected: Status 404, error message
  Command: cd backend && npm test -- server.test.js -t "404"

Test Case: POST /api/jobs should create new job
  Description: Create job with valid data
  Expected: Status 201, created job returned
  Command: cd backend && npm test -- server.test.js -t "POST /api/jobs"

Test Case: POST /api/jobs should return 400 for missing required fields
  Description: Validate required fields
  Expected: Status 400, error message
  Command: cd backend && npm test -- server.test.js -t "400 for missing"

Test Case: PUT /api/jobs/:id should update job
  Description: Update existing job
  Expected: Status 200, updated job returned
  Command: cd backend && npm test -- server.test.js -t "PUT /api/jobs"

Test Case: DELETE /api/jobs/:id should delete job
  Description: Delete job by ID
  Expected: Status 200, success message
  Command: cd backend && npm test -- server.test.js -t "DELETE /api/jobs"


TEST SUITE: Authentication API
-------------------------------------------------------------------------------
Test Case: POST /api/auth/register should register new user
  Description: Register user with valid credentials
  Expected: Status 201, user object returned
  Command: cd backend && npm test -- server.test.js -t "register"

Test Case: POST /api/auth/register should return 400 for invalid password
  Description: Validate password requirements
  Expected: Status 400, error message
  Command: cd backend && npm test -- server.test.js -t "invalid password"

Test Case: POST /api/auth/login should login user
  Description: Login with valid credentials
  Expected: Status 200, user and session returned
  Command: cd backend && npm test -- server.test.js -t "login"

Test Case: POST /api/auth/login should return 401 for invalid credentials
  Description: Handle invalid login
  Expected: Status 401, error message
  Command: cd backend && npm test -- server.test.js -t "401"

Test Case: GET /api/auth/user should return user with valid token
  Description: Get authenticated user
  Expected: Status 200, user object
  Command: cd backend && npm test -- server.test.js -t "GET /api/auth/user"

Test Case: GET /api/auth/user should return 401 without token
  Description: Require authentication
  Expected: Status 401, error message
  Command: cd backend && npm test -- server.test.js -t "401 without token"


TEST SUITE: Online Users API
-------------------------------------------------------------------------------
Test Case: GET /api/users/online should return online count
  Description: Get current online users count
  Expected: Status 200, count number
  Command: cd backend && npm test -- server.test.js -t "online"

Test Case: GET /api/users/online should return fallback count on error
  Description: Handle database errors gracefully
  Expected: Status 200, fallback count
  Command: cd backend && npm test -- server.test.js -t "fallback"


TEST SUITE: Messages API
-------------------------------------------------------------------------------
Test Case: GET /api/messages should return messages for user
  Description: Fetch user's messages
  Expected: Status 200, array of messages
  Command: cd backend && npm test -- server.test.js -t "GET /api/messages"

Test Case: GET /api/messages should return 400 without userId
  Description: Validate required parameters
  Expected: Status 400, error message
  Command: cd backend && npm test -- server.test.js -t "400 without userId"

Test Case: POST /api/messages should send message
  Description: Create new message
  Expected: Status 201, created message
  Command: cd backend && npm test -- server.test.js -t "POST /api/messages"

Test Case: POST /api/messages should return 400 for missing fields
  Description: Validate message data
  Expected: Status 400, error message
  Command: cd backend && npm test -- server.test.js -t "400 for missing fields"


TEST SUITE: Environment Setup
-------------------------------------------------------------------------------
Test Case: Environment variables should be set
  Description: Verify test environment
  Expected: All env vars defined
  Command: cd backend && npm test -- setup.test.js

Test Case: Supabase client should be initialized
  Description: Verify Supabase setup
  Expected: Client created successfully
  Command: cd backend && npm test -- setup.test.js


================================================================================
                        FRONTEND TEST CASES
================================================================================

FILE: src/__tests__/App.test.js

TEST SUITE: App Component
-------------------------------------------------------------------------------
Test Case: renders Dashboard by default
  Description: Default route shows dashboard
  Expected: Dashboard component rendered
  Command: npm test -- App.test.js -t "renders Dashboard"

Test Case: renders Admin when hash is #post-job
  Description: Hash routing to admin page
  Expected: Admin component rendered
  Command: npm test -- App.test.js -t "renders Admin"

Test Case: renders Messages when hash is #messages
  Description: Hash routing to messages
  Expected: Messages component rendered
  Command: npm test -- App.test.js -t "renders Messages"

Test Case: renders Community when hash is #community
  Description: Hash routing to community
  Expected: Community component rendered
  Command: npm test -- App.test.js -t "renders Community"

Test Case: renders Profile when hash is #profile
  Description: Hash routing to profile
  Expected: Profile component rendered
  Command: npm test -- App.test.js -t "renders Profile"


FILE: src/__tests__/components/Header.test.js

TEST SUITE: Header Component
-------------------------------------------------------------------------------
Test Case: renders logo and navigation links
  Description: Header displays correctly
  Expected: Logo and nav links visible
  Command: npm test -- Header.test.js -t "renders logo"

Test Case: displays online users count
  Description: Online users indicator shown
  Expected: Online count displayed
  Command: npm test -- Header.test.js -t "displays online"

Test Case: opens burger menu on click
  Description: Menu toggle works
  Expected: Menu opens/closes
  Command: npm test -- Header.test.js -t "opens burger menu"

Test Case: shows login button when user is not logged in
  Description: Conditional rendering for auth
  Expected: Login button visible
  Command: npm test -- Header.test.js -t "shows login"

Test Case: shows user info when user is logged in
  Description: Display user information
  Expected: User name/email shown
  Command: npm test -- Header.test.js -t "shows user info"

Test Case: calls onNavigate when clicking Post a Job
  Description: Navigation handler works
  Expected: onNavigate called with 'admin'
  Command: npm test -- Header.test.js -t "Post a Job"

Test Case: calls onShowLogin when clicking Login
  Description: Login handler works
  Expected: onShowLogin called
  Command: npm test -- Header.test.js -t "calls onShowLogin"

Test Case: calls onLogout when clicking Logout
  Description: Logout handler works
  Expected: onLogout called
  Command: npm test -- Header.test.js -t "calls onLogout"

Test Case: closes menu when clicking outside
  Description: Click outside handler
  Expected: Menu closes
  Command: npm test -- Header.test.js -t "closes menu"


FILE: src/__tests__/components/Login.test.js

TEST SUITE: Login Component
-------------------------------------------------------------------------------
Test Case: renders login form
  Description: Form displays correctly
  Expected: Form fields visible
  Command: npm test -- Login.test.js -t "renders login form"

Test Case: switches between email and phone login
  Description: Toggle login method
  Expected: Input field changes
  Command: npm test -- Login.test.js -t "switches between"

Test Case: shows validation error for empty email
  Description: Form validation works
  Expected: Error message displayed
  Command: npm test -- Login.test.js -t "empty email"

Test Case: shows validation error for invalid email
  Description: Email format validation
  Expected: Invalid email error
  Command: npm test -- Login.test.js -t "invalid email"

Test Case: shows validation error for short password
  Description: Password length validation
  Expected: Password error displayed
  Command: npm test -- Login.test.js -t "short password"

Test Case: calls onLogin with valid credentials
  Description: Successful login
  Expected: onLogin called with user data
  Command: npm test -- Login.test.js -t "calls onLogin"

Test Case: calls onSwitchToSignUp when clicking sign up link
  Description: Navigation to signup
  Expected: onSwitchToSignUp called
  Command: npm test -- Login.test.js -t "onSwitchToSignUp"

Test Case: calls onClose when clicking close button
  Description: Close handler
  Expected: onClose called
  Command: npm test -- Login.test.js -t "onClose"


FILE: src/__tests__/lib/api.test.js

TEST SUITE: API Client
-------------------------------------------------------------------------------
Test Case: getAll should fetch jobs without filters
  Description: Fetch all jobs
  Expected: API call made correctly
  Command: npm test -- api.test.js -t "getAll"

Test Case: getAll should fetch jobs with filters
  Description: Filtered job fetch
  Expected: Filters applied to request
  Command: npm test -- api.test.js -t "with filters"

Test Case: getById should fetch single job
  Description: Fetch job by ID
  Expected: Single job returned
  Command: npm test -- api.test.js -t "getById"

Test Case: create should post new job
  Description: Create job via API
  Expected: Job created successfully
  Command: npm test -- api.test.js -t "create"

Test Case: update should update job
  Description: Update job via API
  Expected: Job updated successfully
  Command: npm test -- api.test.js -t "update"

Test Case: delete should delete job
  Description: Delete job via API
  Expected: Job deleted successfully
  Command: npm test -- api.test.js -t "delete"

Test Case: register should register new user and store token
  Description: User registration
  Expected: Token stored in localStorage
  Command: npm test -- api.test.js -t "register"

Test Case: login should login user and store token
  Description: User login
  Expected: Token stored in localStorage
  Command: npm test -- api.test.js -t "login"

Test Case: logout should clear tokens
  Description: User logout
  Expected: Tokens removed from localStorage
  Command: npm test -- api.test.js -t "logout"

Test Case: getOnlineCount should fetch online users count
  Description: Get online count
  Expected: Count returned
  Command: npm test -- api.test.js -t "getOnlineCount"

Test Case: getAll should fetch messages for user
  Description: Fetch messages
  Expected: Messages array returned
  Command: npm test -- api.test.js -t "getAll messages"

Test Case: send should send message
  Description: Send message via API
  Expected: Message sent successfully
  Command: npm test -- api.test.js -t "send"


FILE: src/__tests__/utils/timeUtils.test.js

TEST SUITE: Time Utilities
-------------------------------------------------------------------------------
Test Case: returns "just now" for very recent time
  Description: Recent time formatting
  Expected: "just now" returned
  Command: npm test -- timeUtils.test.js

Test Case: returns minutes ago for recent time
  Description: Minutes ago formatting
  Expected: "X minutes ago" format
  Command: npm test -- timeUtils.test.js

Test Case: returns hours ago for older time
  Description: Hours ago formatting
  Expected: "X hours ago" format
  Command: npm test -- timeUtils.test.js

Test Case: returns days ago for very old time
  Description: Days ago formatting
  Expected: "X days ago" format
  Command: npm test -- timeUtils.test.js

Test Case: handles invalid date gracefully
  Description: Error handling
  Expected: Default value returned
  Command: npm test -- timeUtils.test.js


FILE: src/__tests__/utils/jobUrlParser.test.js

TEST SUITE: Job URL Parser
-------------------------------------------------------------------------------
Test Case: detects LinkedIn URLs
  Description: LinkedIn URL detection
  Expected: "LinkedIn" returned
  Command: npm test -- jobUrlParser.test.js

Test Case: detects Indeed URLs
  Description: Indeed URL detection
  Expected: "Indeed" returned
  Command: npm test -- jobUrlParser.test.js

Test Case: detects Glassdoor URLs
  Description: Glassdoor URL detection
  Expected: "Glassdoor" returned
  Command: npm test -- jobUrlParser.test.js

Test Case: returns null for unknown URLs
  Description: Unknown URL handling
  Expected: null returned
  Command: npm test -- jobUrlParser.test.js

Test Case: returns error for invalid URL
  Description: Invalid URL handling
  Expected: Error object returned
  Command: npm test -- jobUrlParser.test.js

Test Case: extracts company from LinkedIn URL
  Description: Company name extraction
  Expected: Company name extracted
  Command: npm test -- jobUrlParser.test.js

Test Case: extracts job title from URL
  Description: Title extraction
  Expected: Job title extracted
  Command: npm test -- jobUrlParser.test.js

Test Case: detects remote work from URL
  Description: Remote work detection
  Expected: workLocation set to "Remote"
  Command: npm test -- jobUrlParser.test.js

Test Case: detects senior level from title
  Description: Experience level detection
  Expected: experience set to "Senior"
  Command: npm test -- jobUrlParser.test.js

Test Case: detects junior level from title
  Description: Experience level detection
  Expected: experience set to "Junior"
  Command: npm test -- jobUrlParser.test.js


================================================================================
                        TEST COMMANDS SUMMARY
================================================================================

Run All Backend Tests:
  cd backend && npm test

Run All Frontend Tests:
  npm test

Run Backend Tests with Coverage:
  cd backend && npm test -- --coverage

Run Frontend Tests with Coverage:
  npm test -- --coverage

Run Backend Tests in Watch Mode:
  cd backend && npm run test:watch

Run Frontend Tests in Watch Mode:
  npm test -- --watch

Run Specific Test File (Backend):
  cd backend && npm test -- server.test.js

Run Specific Test File (Frontend):
  npm test -- App.test.js

Run Specific Test Case:
  npm test -- -t "test case name"

Run Tests Matching Pattern:
  npm test -- -t "pattern"


================================================================================
                        TEST COVERAGE GOALS
================================================================================

Backend Coverage:
  - Branches: 70%+
  - Functions: 70%+
  - Lines: 70%+
  - Statements: 70%+

Frontend Coverage:
  - Overall: 60%+
  - Critical Components: 90%+
  - Utilities: 80%+


================================================================================
                        TESTING BEST PRACTICES
================================================================================

1. Write tests before fixing bugs (TDD)
2. Test user behavior, not implementation
3. Keep tests independent
4. Use descriptive test names
5. Mock external dependencies
6. Test edge cases and errors
7. Maintain coverage thresholds
8. Run tests before committing
9. Review test failures carefully
10. Update tests when code changes


================================================================================
For more testing information, see TESTING_GUIDE.md
For test setup, see src/setupTests.js and backend/jest.config.js
================================================================================
